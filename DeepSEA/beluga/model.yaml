defined_as: model.TorchModel
args:
  torch_t7_file:
    url: https://zenodo.org/record/1744799/files/deepsea.beluga.2002.cpu?download=1
    md5: 8ddcd81fa2afb0b59e2b3e83cc36dfb9

info:
  authors:
      - name: Jian Zhou
      - name: Olga G. Troyanskaya
  license: Non-comercial

  doc: >

    TODO
    add model description
    
  cite_as: https://doi.org/10.1038/s41588-018-0160-6
  trained_on: TODO - which chromosomes were in the validation set and which test?
  tags:
    - Histone modification
    - DNA binding
    - DNA accessibility

default_dataloader:
  defined_as: kipoiseq.dataloaders.SeqIntervalDl
  default_args:
    auto_resize_len: 2000
    alphabet_axis: 0
    dummy_axis: 2
    alphabet: AGCT
    dtype: np.float32

dependencies:
  conda:
    - h5py
    - pytorch::pytorch-cpu>=0.2.0
  pip:
    - kipoiseq

schema:
  inputs:
    name: seq
    special_type: DNASeq
    shape: (4, 2000, 1)
    doc: DNA sequence
    associated_metadata: ranges
  targets:
    name: TFBS_DHS_probs
    shape: (2002, )
    doc: Probability of a specific epigentic feature
    # TODO - add a file with predictor names. One per row
    # column_labels:
    #  - predictor_names.txt

# TODO - generate the test predictions
#test:
#  expect:
#    url: https://s3.eu-central-1.amazonaws.com/kipoi-models/predictions/14f9bf4b49e21c7b31e8f6d6b9fc69ed88e25f43/DeepSEA/predict/predictions.h5
#    md5: fc60cfb01a4a4415e7a1095e5f7716e5
#  precision_decimal: 6
